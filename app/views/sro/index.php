<!-- Main Row =============================================== --><div class="container-fluid">	<div class="row-fluid">				<div class="well">			<h1 class="text-info">Surat Rekomendasi Operasi</h1>		</div>		<div class="well">			<div class="pull-right">				<a href="javascript:void(0)" id="btnAdd" class="btn btn-primary" onClick="showFormAddNew()"><i class="icon-plus icon-white"></i> Tambah Baru</a>			</div>			<input type="text" id="filterTanggal" placeholder="Pilih Tanggal Untuk Filter" value="<? echo date('Y-m-d'); ?>" class="span2">			<br>			<table class="table table-bordered table-hover">				<thead>					<tr>						<th>Nomor SRO</th>						<th>Armada</th>						<th>Pengemudi</th>						<th>Jam Keluar</th>						<th width='15%'>Aksi</th>					</tr>				</thead>								<tbody id="tblsro">					<? foreach ($this->listSRO as $key => $value) { ?>						<tr id="sro-<? echo $value['id']; ?>">							<td><? echo $value['nomor']; ?></td>							<td><strong class="text-info"><? echo $value['nomorunit']; ?></strong></td>							<td><strong class="text-success"><? echo $value['pengemudi']; ?></strong></td>							<td><? echo date('H:i:s', strtotime($value['tanggal'])); ?></td>							<td>								<div class="btn-group">									<a class="btn btn-primary" href="javascript:void(0)"><i class="icon-edit icon-white"></i> Aksi</a>									<a class="btn btn-primary dropdown-toggle" data-toggle="dropdown" href="javascript:void(0)"><span class="caret"></span></a>									<ul class="dropdown-menu">										<li>											<a href="javascript:void(0)" onClick="return cetakSRO(<? echo $value['id']; ?>)">											<i class="icon-print"></i> Cetak SRO</a>										</li>										<li>											<a href="javascript:void(0)" onClick="return hapus(<? echo $value['id']; ?>)">											<i class="icon-remove"></i> Batalkan</a>										</li>									</ul>								</div>							</td>						</tr>					<? } ?>				</tbody>			</table>		</div>	</div></div><!-- Form Add SRO [modal]===================================== --><div id="formAddNew" class="modal hide fade" tabindex="-1" aria-hidden="true">	<div class="modal-header">		<button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>		<h3 id="myModalLabel">Buat SRO Baru</h3>	</div>	<div class="modal-body">		<form class="form-horizontal">			<div class="control-group">				<label class="control-label" for="inputNomorUnit">Armada</label>				<div class="controls">					<input type="hidden" id="inputIDArmada">					<input type="text" id="inputNomorUnit" class="span3" data-provide="typeahead" placeholder="Nomor Unit">				</div>			</div>				<div class="control-group">				<label class="control-label" for="inputNomorPengemudi">Pengemudi</label>				<div class="controls">					<input type="hidden" id="inputIDPengemudi">					<input type="text" id="inputNomorPengemudi" class="span3" data-provide="typeahead" placeholder="Nomor atau Nama Pengemudi">				</div>			</div>		</form>	</div>	<div class="modal-footer">		<button class="btn" data-dismiss="modal" aria-hidden="true">Batal</button>		<button id="btnSave" class="btn btn-primary" onClick="notDouble()" data-dismiss="modal" aria-hidden="true">Simpan</button>	</div></div><!-- End of Form Add SRO [modal] --><script type="text/javascript">	$(function(){		$('#filterTanggal').datepicker({			dateFormat : "yy-mm-dd",			onSelect : function(date){				load('sro/filter/'+date,'#tblsro');			}		});		$('#inputNomorUnit').typeahead({			source : function(query,process){				return $.post(site+'sro/getlistarmada', {nomor : query}, function(response){					response = $.parseJSON(response);					var sourceArr = [];						for(var i = 0; i < response.length; i++)					{						sourceArr.push(response[i].id +"#"+ response[i].nomorunit +"#"+ response[i].kondisi);					}					return process(sourceArr);				})			},			highlighter : function(item){				var armada = item.split('#');				var item = ''                		+ "<div class='typeahead_wrapper'>"                		+ "<img class='typeahead_photo' src='"+site+"assets/img/car-icon.png'/>"                		+ "<div class='typeahead_labels'>"                		+ "<div class='typeahead_primary'>" + armada[1] + "</div>"                 		+ "<div class='typeahead_secondary'>Kondisi : " + capitalizeFirstLetter(armada[2]) + "</div>"                 		+ "</div>"                 		+ "</div>";       		 	return item;			},			updater : function(item){				var armada = item.split('#');				$('#inputIDArmada').val(armada[0]);				return armada[1];			}		});		$('#inputNomorPengemudi').typeahead({			source : function(query,process){				return $.post(site+'sro/getlistpengemudi', {param : query}, function(response){					response = $.parseJSON(response);					var sourceArr = [];						for(var i = 0; i < response.length; i++)					{						sourceArr.push(response[i].id +"#"+ response[i].nomor +"#"+ response[i].nama +"#"+ response[i].foto);					}					return process(sourceArr);				})			},			highlighter : function(item){				var pengemudi = item.split('#');				var item = ''                		+ "<div class='typeahead_wrapper'>"                		+ "<img class='typeahead_photo' src='"+site+"assets/img/pengemudi/"+pengemudi[3]+"'/>"                		+ "<div class='typeahead_labels'>"                		+ "<div class='typeahead_primary'>" + pengemudi[1] + "</div>"                 		+ "<div class='typeahead_secondary'>Nama : " + pengemudi[2] + "</div>"                 		+ "</div>"                 		+ "</div>";       		 	return item;			},			updater : function(item){				var pengemudi = item.split('#');				$('#inputIDPengemudi').val(pengemudi[0]);				return pengemudi[1];			}		});	})	function showFormAddNew()	{		var status = $('#statusButton').val();		if(status == 'disable')		{			window.alert("Tidak Dapat Membuat SRO Beda Tanggal, \nSilakan Melapor ke user dengan Level Admin");		}		else		{			$('#formAddNew').modal('show');			$('#inputNomorUnit').val('');			$('input[name=inputIDArmada]').val('0');			$('#inputNomorPengemudi').val('');			$('input[name=inputIDPengemudi]').val('0');			$('#formAddNew').on('shown', function() {				$('#inputNomorUnit').focus();			});		}	}	function addNew()	{		var nomorunit = $('#inputNomorUnit').val();		var armada = $('#inputIDArmada').val();		var nomorpengemudi = $('#inputNomorPengemudi').val();		var pengemudi = $('#inputIDPengemudi').val();		var tanggal = $('#filterTanggal').val();		if(armada != 0 && armada != '' && pengemudi != 0 || pengemudi != '')		{			$.post(site+'sro/save', 			{				nomorunit : nomorunit, 				armada : armada, 				nomorpengemudi : nomorpengemudi, 				pengemudi : pengemudi,				tanggal : tanggal			}, 			function(data) {				$('#inputIDArmada').val(0);				$('#inputIDPengemudi').val(0);								if(confirm("Ingin Mencetak SRO?"))				{					load('sro/bukti/'+data['id'],'#content');				}				else				{					load('sro/filter/'+tanggal,'#tblsro');				}			},'json');						}		else		{			window.alert('Input Tidak Lengkap!!');		}			}	function notDouble()	{		var armada = $('#inputIDArmada').val();		var pengemudi = $('#inputIDPengemudi').val();		var tanggal = $('#filterTanggal').val();		$.post(site+'sro/notdouble', {armada : armada, pengemudi : pengemudi, tanggal : tanggal}, 			function(data) {				if(data.double === 'TIDAK')				{					addNew();				}				else				{					window.alert('Armada atau Pengemudi Telah Mendapatkan SRO!!!');				}			}, 'json');	}	function hapus(id)	{		if(confirm("Anda Yakin Akan Menghapus Data Ini? \nSemua Data Berkaitan dengan Data ini Akan Ikut Terhapus."))		{			$.post(site+'sro/delete', {id : id}, function(){				$('#sro-'+id).remove();			});		}	}	function cetakSRO(id)	{		load('sro/bukti/'+id,'#content');	}</script>