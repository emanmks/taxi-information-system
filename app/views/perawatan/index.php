<!-- Main Row =============================================== --><div class="container-fluid">	<div class="row-fluid">				<div class="well">			<h1 class="text-info">Perawatan</h1>		</div>		<div class="well">			<div class="pull-right">				<button class="btn btn-primary" onClick="showFormAddNew()"><i class="icon-plus icon-white"></i> Tambah Baru</button>			</div>			<input type="text" id="filterTanggal" placeholder="Pilih Tanggal Untuk Filter" value="<? echo date('Y-m-d'); ?>">			<br><br>			<table class="table table-bordered table-hover">				<thead>					<tr>						<th>Nomor</th>						<th>Armada</th>						<th>Tanggal</th>						<th width="30%">Detail</th>						<th>Biaya Perawatan</th>						<th>Biaya Spare Parts</th>						<th width='10%'>Aksi</th>					</tr>				</thead>								<tbody id="tblperawatan">					<? foreach ($this->listPerawatan as $key => $value) { ?>						<tr id="perawatan-<? echo $value['id']; ?>">							<td><? echo $value['nomor']; ?></td>							<td><? echo $value['nomorunit']; ?></td>							<td><? echo date('d-m-Y', strtotime($value['tanggal'])); ?></td>							<td><? echo $value['detail']; ?></td>							<td><? echo $this->pecah($value['biayaperawatan']); ?></td>							<td><? echo $this->pecah($value['biayaparts']); ?></td>							<td>								<div class="btn-group">									<a class="btn btn-primary" href="javascript:void(0)"><i class="icon-edit icon-white"></i> Aksi</a>									<a class="btn btn-primary dropdown-toggle" data-toggle="dropdown" href="javascript:void(0)"><span class="caret"></span></a>									<ul class="dropdown-menu">										<li>											<a href="javascript:void(0)" onClick="return showDetail(<? echo $value['id']; ?>)">											<i class="icon-pencil"></i> Detail</a>										</li>										<li>											<a href="javascript:void(0)" onClick="return remove(<? echo $value['id']; ?>)">											<i class="icon-remove"></i> Hapus</a>										</li>									</ul>								</div>							</td>						</tr>					<? } ?>				</tbody>			</table>		</div>	</div></div><!-- Form Add Perawatan [modal]===================================== --><div id="formAddNew" class="modal hide fade" tabindex="-1" aria-hidden="true">	<div class="modal-header">		<button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>		<h3 id="myModalLabel">Perawatan</h3>	</div>	<div class="modal-body">		<form class="form-horizontal">			<div class="control-group">				<label class="control-label" for="inputNomorUnit">Armada</label>				<div class="controls">					<input type="hidden" id="inputIDArmada">					<input type="text" id="inputNomorUnit" class="span3" data-provide="typeahead" placeholder="Nomor Unit">				</div>			</div>				<div class="control-group">				<label class="control-label" for="inputDetail">Rincian Perawatan</label>				<div class="controls">					<textarea id="inputDetail"></textarea>				</div>			</div>				<div class="control-group">				<label class="control-label" for="inputBiayaPerawatan">Biaya Perawatan</label>				<div class="controls">					<input type="text" id="inputBiayaPerawatan" onKeyUp="formatNumber(this)">				</div>			</div>				<div class="control-group">				<label class="control-label" for="inputBiayaParts">Biaya Spare Parts</label>				<div class="controls">					<small>Biaya Spare Parts akan Dihitung Selanjutnya</small>				</div>			</div>			</form>	</div>	<div class="modal-footer">		<button class="btn" data-dismiss="modal" aria-hidden="true">Batal</button>		<button class="btn btn-primary" onClick="addNew()" data-dismiss="modal" aria-hidden="true">Simpan</button>	</div></div><!-- End of Form Add Perawatan [modal] --><script type="text/javascript">	$(function(){		$('#filterTanggal').datepicker({			dateFormat : "yy-mm-dd",			onSelect : function(date){				load('perawatan/filter/'+date,'#tblperawatan');			}		});		$('#inputNomorUnit').typeahead({			source : function(query,process){				return $.post(site+'sro/getlistarmada', {nomor : query}, function(response){					response = $.parseJSON(response);					var sourceArr = [];						for(var i = 0; i < response.length; i++)					{						sourceArr.push(response[i].id +"#"+ response[i].nomorunit +"#"+ response[i].kondisi);					}					return process(sourceArr);				})			},			highlighter : function(item){				var armada = item.split('#');				var item = ''                		+ "<div class='typeahead_wrapper'>"                		+ "<img class='typeahead_photo' src='"+site+"assets/img/car-icon.png'/>"                		+ "<div class='typeahead_labels'>"                		+ "<div class='typeahead_primary'>" + armada[1] + "</div>"                 		+ "<div class='typeahead_secondary'>Kondisi : " + capitalizeFirstLetter(armada[2]) + "</div>"                 		+ "</div>"                 		+ "</div>";       		 	return item;			},			updater : function(item){				var armada = item.split('#');				$('#inputIDArmada').val(armada[0]);				return armada[1];			}		});	})	function showFormAddNew()	{		$('#formAddNew').modal('show');	}	function addNew()	{			var armada = $('#inputIDArmada').val();		var tanggal = $('#filterTanggal').val();		var detail = $('#inputDetail').val();		var biayaperawatan = parseInt(replaceAll($('#inputBiayaPerawatan').val(),',',''));		$.post(site+'perawatan/addnew', {armada : armada, tanggal : tanggal, detail : detail, biayaperawatan : biayaperawatan}, function(){			window.location = site+"perawatan";		});	}	function showDetail(id)	{		load('perawatan/details/'+id, '#content');	}	function remove(id)	{		if(confirm("Anda Yakin Akan Menghapus Data Ini?"))		{			$.post(site+'perawatan/delete', {id : id}, function(){				$('#perawatan-'+id).remove();			});		}	}</script>