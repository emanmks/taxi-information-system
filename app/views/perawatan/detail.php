<!-- Main Row =============================================== --><div class="container-fluid">	<div class="row-fluid">				<div class="well">			<h3 class="text-info">Detail Perawatan</h3>		</div>		<br>		<div class="well span5">			<legend>Detail Perawatan</legend>				<table class="table table-hover">					<tbody>						<tr>							<td width="49%"><div class="pull-right">Nomor</div></td>							<td>:</td>							<td width="49%"><strong class="text-info"><? echo $this->detailPerawatan['nomor']; ?></strong></td>						</tr>						<tr>							<td><div class="pull-right">Armada</div></td>							<td>:</td>							<td><strong class="text-info"><? echo $this->detailPerawatan['nomorunit']; ?></strong></td>						</tr>						<tr>							<td><div class="pull-right">Tanggal</div></td>							<td>:</td>							<td><strong class="text-info"><? echo date('d-m-Y', strtotime($this->detailPerawatan['tanggal'])); ?></strong></td>						</tr>						<tr>							<td><div class="pull-right">Detail Perawatan</div></td>							<td>:</td>							<td><strong class="text-info"><? echo $this->detailPerawatan['detail']; ?></strong></td>						</tr>						<tr>							<td><div class="pull-right">Biaya Perawatan (Non Spare Parts)</div></td>							<td>:</td>							<td><strong class="text-info"><? echo $this->detailPerawatan['biayaperawatan']; ?></strong></td>						</tr>						<tr>							<td><div class="pull-right">Total Biaya Spare Parts</div></td>							<td>:</td>							<td><strong class="text-info"><? echo $this->detailPerawatan['biayaparts']; ?></strong></td>						</tr>						<tr>							<td><div class="pull-right">Mengetahui</div></td>							<td>:</td>							<td><strong class="text-info"><? echo $this->detailPerawatan['namapegawai']; ?></strong></td>						</tr>					</tbody>				</table>				<center><button class="btn btn-mini btn-info" onClick="showFormUpdatePerawatan(<? echo $this->detailPerawatan['id'];?>)">Klik Disini untuk Update Data Diatas</button></center>		</div>		<div class="well span6">			<legend>Detail Spare Parts</legend>						<div class="pull-right"><button class="btn btn-small btn-primary" onClick="showFormAddParts()">Tambah Item</button></div><br><br>			<table class="table table-bordered table-hover">				<thead>					<tr>						<th>Kode</th>						<th>Nama</th>						<th>Jumlah</th>						<th>Harga Jual</th>						<th width='10%'>Aksi</th>					</tr>				</thead>								<tbody id="tblParts">					<? foreach ($this->listParts as $key => $value) { ?>						<tr id="parts-<? echo $value['id']; ?>">							<td><? echo $value['kode']; ?></td>							<td><? echo $value['nama']; ?></td>							<td><? echo $value['jumlah']; ?></td>							<td><? echo $value['hargajual']; ?></td>							<td>								<div class="btn-group">									<a class="btn btn-primary" href="javascript:void(0)"><i class="icon-edit icon-white"></i> Aksi</a>									<a class="btn btn-primary dropdown-toggle" data-toggle="dropdown" href="javascript:void(0)"><span class="caret"></span></a>									<ul class="dropdown-menu">										<!--<li>											<a href="javascript:void(0)" onClick="return showFormUpdateParts(<? //echo $value['id']; ?>)">											<i class="icon-pencil"></i> Update</a>										</li>										-->										<li>											<a href="javascript:void(0)" onClick="return removeParts(<? echo $this->detailPerawatan['id']; ?>,<? echo $value['id']; ?>)">											<i class="icon-remove"></i> Hapus</a>										</li>									</ul>								</div>							</td>						</tr>					<? } ?>				</tbody>			</table>		</div>	</div></div><!-- Form Update Perawatan [modal]===================================== --><div id="formUpdatePerawatan" class="modal hide fade" tabindex="-1" aria-hidden="true">	<div class="modal-header">		<button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>		<h3 id="myModalLabel">Perawatan</h3>	</div>	<div class="modal-body">		<form class="form-horizontal">			<div class="control-group">				<label class="control-label" for="inputDetail">Rincian Perawatan</label>				<div class="controls">					<textarea id="inputDetail"><? echo $this->detailPerawatan['detail'] ?></textarea>				</div>			</div>				<div class="control-group">				<label class="control-label" for="inputBiayaPerawatan">Biaya Perawatan</label>				<div class="controls">					<input type="text" id="inputBiayaPerawatan" onKeyUp="formatNumber(this)" value="<? echo $this->detailPerawatan['biayaperawatan'] ?>">				</div>			</div>		</form>	</div>	<div class="modal-footer">		<button class="btn" data-dismiss="modal" aria-hidden="true">Batal</button>		<button class="btn btn-primary" onClick="updatePerawatan(<? echo $this->detailPerawatan['id'] ?>)" data-dismiss="modal" aria-hidden="true">Simpan</button>	</div></div><!-- End of Form Add Perawatan [modal] --><!-- Form Add Parts [modal]===================================== --><div id="formAddParts" class="modal hide fade" tabindex="-1" aria-hidden="true">	<div class="modal-header">		<button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>		<h3 id="myModalLabel">Detail Spare Parts</h3>	</div>	<div class="modal-body">		<form class="form-horizontal">			<div class="control-group">				<label class="control-label" for="inputParts">Spare Parts</label>				<div class="controls">					<input type="hidden" id="inputIDParts">					<input type="text" id="inputParts" class="span3" data-provide="typeahead" placeholder="Ketikkan Kode atau Nama">				</div>			</div>				<div class="control-group">				<label class="control-label" for="inputJumlah">Jumlah</label>				<div class="controls">					<input type="text" id="inputJumlah">				</div>			</div>			</form>	</div>	<div class="modal-footer">		<button class="btn" data-dismiss="modal" aria-hidden="true">Batal</button>		<button class="btn btn-primary" onClick="addParts(<? echo $this->detailPerawatan['id']; ?>)" data-dismiss="modal" aria-hidden="true">Simpan</button>	</div></div><!-- End of Form Add Parts [modal] --><!-- Form Update Parts [modal]===================================== --><div id="formUpdateParts" class="modal hide fade" tabindex="-1" aria-hidden="true">	<div class="modal-header">		<button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>		<h3 id="myModalLabel">Detail Spare Parts</h3>	</div>	<div class="modal-body">		<form class="form-horizontal">			<div class="control-group">				<label class="control-label" for="inputNomorUnit">Spare Parts</label>				<div class="controls">					<input type="hidden" id="inputIDParts">					<input type="text" id="inputKodeParts" class="span3" data-provide="typeahead" placeholder="Kode / Nama">				</div>			</div>				<div class="control-group">				<label class="control-label" for="inputJumlah">Jumlah</label>				<div class="controls">					<input type="text" id="inputJumlah">				</div>			</div>			</form>	</div>	<div class="modal-footer">		<button class="btn" data-dismiss="modal" aria-hidden="true">Batal</button>		<button class="btn btn-primary" onClick="updateParts()" data-dismiss="modal" aria-hidden="true">Simpan</button>	</div></div><!-- End of Form Update Parts [modal] --><script type="text/javascript">	$(function(){		$('#inputParts').typeahead({			source : function(query,process){				return $.post(site+'perawatan/getlistparts', {param : query}, function(response){					response = $.parseJSON(response);					var sourceArr = [];						for(var i = 0; i < response.length; i++)					{						sourceArr.push(response[i].id +"#"+ response[i].kode +"#"+ response[i].nama);					}					return process(sourceArr);				})			},			highlighter : function(item){				var parts = item.split('#');				var item = ''	            		+ "<div class='typeahead_wrapper'>"	            		+ "<img class='typeahead_photo' src='"+site+"assets/img/tools-icon.png'/>"	            		+ "<div class='typeahead_labels'>"	            		+ "<div class='typeahead_primary'>" + parts[1] + "</div>"	             		+ "<div class='typeahead_secondary'>Nama : " + capitalizeFirstLetter(parts[2]) + "</div>"	             		+ "</div>"	             		+ "</div>";	   		 	return item;			},			updater : function(item){				var parts = item.split('#');				$('#inputIDParts').val(parts[0]);				return parts[2];			}		});	})	function showFormUpdatePerawatan()	{		$('#formUpdatePerawatan').modal('show');	}	function showFormAddParts()	{		$('#formAddParts').modal('show');	}	function updatePerawatan(id)	{		var detail = $('#inputDetail').val();		var biayaperawatan = parseInt(replaceAll($('#inputBiayaPerawatan').val(),',',''));		$.post(site+'perawatan/update',{id : id, detail : detail, biayaperawatan : biayaperawatan}, function(){			load('perawatan/details/'+id, '#content');		});	}	function addParts(perawatan)	{		var parts = $('#inputIDParts').val();		var jumlah = $('#inputJumlah').val();		$.post(site+'perawatan/addparts', {perawatan : perawatan, parts : parts, jumlah : jumlah}, function(){			load('perawatan/details/'+perawatan, '#content');		});	}	function removeParts(perawatan,id)	{		$.post(site+'perawatan/deleteparts', {id : id}, function(){			load('perawatan/details/'+perawatan, '#content');		});	}</script>