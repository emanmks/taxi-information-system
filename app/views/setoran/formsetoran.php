<!-- Main Row =============================================== --><div class="container-fluid">	<div class="row-fluid">				<div class="well">			<h3 class="text-info">Form Setoran</h3>		</div>		<div class="well span5">			<form class="form-horizontal">				<input type="hidden" id="sroID" value="<? echo $this->detailSRO['sroid']; ?>">				<input type="hidden" id="armadaID" value="<? echo $this->detailSRO['idarmada']; ?>">				<input type="hidden" id="pengemudiID" value="<? echo $this->detailSRO['idpengemudi']; ?>">				<input type="hidden" id="pegawaiID" value="<? echo Session::get('user_idPegawai'); ?>">				<input type="hidden" id="tglSetoran" value="<? echo $this->tglSetoran; ?>">			<legend>Detail SRO</legend>				<div class="control-group">					<label class="control-label" for="inputNomorUnit">Nomor Unit</label>					<div class="controls">						<strong class="text-info"><? echo $this->detailSRO['nomorunit'] ?></strong>					</div>				</div>				<div class="control-group">					<label class="control-label" for="inputPengemudi">Pengemudi</label>					<div class="controls">						    <div class="media">    							<a class="pull-left" href="#">    								<img class="img-polaroid" src="<? echo URL; ?>assets/img/pengemudi/<? echo $this->detailSRO['fotopengemudi']; ?>" style="width:40px;height:40px">    							</a>    							<div class="media-body">    								<h4 class="media-heading"><? echo $this->detailSRO['namapengemudi']; ?></h4>    								<p class="text-muted"><? echo $this->detailSRO['nomorpengemudi']; ?></p>   	 							</div>    						</div>					</div>				</div>				<div class="control-group">					<label class="control-label" for="inputNomorSRO">Nomor SRO</label>					<div class="controls">						<strong class="text-info"><? echo $this->detailSRO['nomor']; ?></strong>					</div>				</div>			<br><br>			<legend>Target Setoran</legend>				<div class="control-group">					<label class="control-label" for="inputTargetSetoran">Setoran</label>					<div class="controls">						<input type="text" id="targetSetoran" value="<? echo $this->pecah($this->detailSRO['targetsetoran']); ?>" disabled>						<input type="hidden" id="inputTargetSetoran" value="<? echo $this->detailSRO['targetsetoran']; ?>">					</div>				</div>				<div class="control-group">					<label class="control-label" for="inputTargetCaper">Caper</label>					<div class="controls">						<input type="text" id="targetCaper" value="<? echo $this->pecah($this->detailSRO['targetcaper']); ?>" disabled>						<input type="hidden" id="inputTargetCaper" value="<? echo $this->detailSRO['targetcaper']; ?>">					</div>				</div>				<div class="control-group">					<label class="control-label" for="inputTotal">Total</label>					<div class="controls">						<input type="text" id="total" value="<? echo $this->pecah($total = (int)$this->detailSRO['targetsetoran']+(int)$this->detailSRO['targetcaper']); ?>" disabled>						<input type="hidden" id="inputTotal" value="<? echo $total = (int)$this->detailSRO['targetsetoran']+(int)$this->detailSRO['targetcaper']; ?>">					</div>				</div>			</form>			<br><br>		</div>		<div class="well span6" style="width:625px">			<form class="form-horizontal">				<legend>Detail Setoran</legend>				<div class="control-group">					<label class="control-label" for="inputTotalSetoran">Total Setoran</label>					<div class="controls">						<input type="text" id="inputTotalSetoran" class="span5" onKeyUp="formatNumber(this)" value="0">						<input type="hidden" id="inputSetoran" value="0">						<input type="hidden" id="inputCaper" value="0">					</div>				</div>				<div class="control-group">					<label class="control-label" for="inputDispensasi">Dispensasi</label>					<div class="controls">						<input type="text" id="inputDispensasi" class="span5" onKeyUp="formatNumber(this)" value="0">					</div>				</div>				<div class="control-group">					<label class="control-label" for="inputKelebihan">Kelebihan</label>					<div class="controls">						<input type="text" id="inputKelebihan" class="span5" onKeyUp="formatNumber(this)" value="0" disabled>					</div>				</div>				<div class="control-group">					<label class="control-label" for="inputKelebihan">Alokasi Kelebihan</label>					<div class="controls">						<a href="javascript:void(0)" class="btn btn-mini btn-info" onClick="showFormBayarLoanLaka();" id="btnBayarLaka" disabled>Bayar Cicilan Laka</a>						<a href="javascript:void(0)" class="btn btn-mini btn-info" onClick="showFormBayarKS();" id="btnBayarKS" disabled>Bayar Tagihan KS</a>						<a href="javascript:void(0)" class="btn btn-mini btn-info" onClick="showFormTabungan();" id="btnTabung" disabled>Tabung</a>					</div>				</div>				<legend>Pembayaran</legend>				<div class="control-group">					<label class="control-label" for="inputCicilanLaka">Cicilan Laka</label>					<div class="controls">						<input type="text" id="inputCicilanLaka" class="span5" value="0" disabled>					</div>				</div>				<div class="control-group">					<label class="control-label" for="inputCicilanKS">Bayar KS</label>					<div class="controls">						<input type="text" id="inputCicilanKS" class="span5" value="0" disabled>					</div>				</div>				<div class="control-group">					<label class="control-label" for="inputTabungan">Tabungan</label>					<div class="controls">						<input type="text" id="inputTabungan" class="span5" value="0" disabled>					</div>				</div>				<legend></legend>				<div class="control-group">					<label class="control-label" for="inputKurangSetoran">Kurang Setoran</label>					<div class="controls">						<input type="text" id="inputKurangSetoran" class="span5" value="0" disabled>					</div>				</div>			</form>			<div class="info"></div>			<div class="pull-right">				<button class="btn btn-success" onClick="batalkan()">Batalkan</button>				<button class="btn btn-success" onClick="bayarSetoran()">Simpan</button>			</div>		</div>	</div></div><!-- Form Bayar Loan Laka [modal]===================================== --><div id="formBayarLoanLaka" class="modal hide fade" tabindex="-1" aria-hidden="true">	<div class="modal-header">		<button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>		<h3 id="myModalLabel">Bayar Tagihan </h3>	</div>	<div class="modal-body">		<form class="form-horizontal">			<div class="control-group">				<label class="control-label" for="inputKode">Pilihan Tagihan Laka</label>				<div class="controls">					<select id="inputTagihanLaka">						<? foreach ($this->listLoanLaka as $key => $value) { ?>							<option value="<? echo $value['id']; ?>"><? echo $value['nomorloan'].'--'.$this->pecah($value['bebanlaka']); ?></option>						<? } ?>					</select>				</div>			</div>				<div class="control-group">				<label class="control-label" for="inputNilaiBayarLoanLaka">Nilai yang dibayar</label>				<div class="controls">					<input id="inputNilaiBayarLoanLaka" class="span3" type="text" onKeyUp="formatNumber(this)" value="0">				</div>			</div>			</form>	</div>	<div class="modal-footer">		<button class="btn" data-dismiss="modal" aria-hidden="true">Batal</button>		<button class="btn btn-primary" onClick="setBayarLoanLaka()" data-dismiss="modal" aria-hidden="true">Simpan</button>	</div></div><!-- End of Form Bayar Loan Laka [modal] --><!-- Form Bayar Kurang Setoran [modal]===================================== --><div id="formBayarKS" class="modal hide fade" tabindex="-1" aria-hidden="true">	<div class="modal-header">		<button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>		<h3 id="myModalLabel">Bayar Tagihan Kurang Setoran</h3>	</div>	<div class="modal-body">		<form class="form-horizontal">			<div class="control-group">				<label class="control-label" for="inputNilaiBayarLoanKS">Nilai yang dibayar</label>				<div class="controls">					<input id="inputNilaiBayarLoanKS" class="span3" type="text" onKeyUp="formatNumber(this)" value="0">				</div>			</div>			</form>	</div>	<div class="modal-footer">		<button class="btn" data-dismiss="modal" aria-hidden="true">Batal</button>		<button class="btn btn-primary" onClick="setBayarKS()" data-dismiss="modal" aria-hidden="true">Simpan</button>	</div></div><!-- End of Form Bayar Kurang Setoran [modal] --><!-- Form Tabungan [modal]===================================== --><div id="formTabungan" class="modal hide fade" tabindex="-1" aria-hidden="true">	<div class="modal-header">		<button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>		<h3 id="myModalLabel">Tabungan</h3>	</div>	<div class="modal-body">		<form class="form-horizontal">			<div class="control-group">				<label class="control-label" for="inputNilaiTabungan">Nilai yang dibayar</label>				<div class="controls">					<input id="inputNilaiTabungan" class="span3" type="text" onKeyUp="formatNumber(this)" value="0">				</div>			</div>			</form>	</div>	<div class="modal-footer">		<button class="btn" data-dismiss="modal" aria-hidden="true">Batal</button>		<button class="btn btn-primary" onClick="setTabungan()" data-dismiss="modal" aria-hidden="true">Simpan</button>	</div></div><!-- End of Form Bayar Kurang Setoran [modal] --><script type="text/javascript">	$(function(){		$('#inputTotalSetoran').blur(function(){			var nilaitotalsetoran = parseInt(replaceAll($('#inputTotalSetoran').val(),',',''));			var targetsetoran = parseInt($('#inputTargetSetoran').val());			var targetcaper = parseInt($('#inputTargetCaper').val());			var sisasetoran = nilaitotalsetoran - targetcaper;			var sisa = sisasetoran - targetsetoran;			if(sisa > 0)			{				$('#inputKelebihan').val(sisa);				$('#inputSetoran').val(targetsetoran);				$('#inputCaper').val(targetcaper);				$('#inputCicilanLaka').val(0);				$('#inputCicilanKS').val(0);				$('#inputTabungan').val(0);				$('#inputKurangSetoran').val(0);				$('#inputDispensasi').val(0);				$('#btnBayarLaka').removeAttr('disabled');				$('#btnBayarKS').removeAttr('disabled');				$('#btnTabung').removeAttr('disabled');			}			else if(sisa == 0)			{				$('#inputKelebihan').val(0);				$('#inputSetoran').val(targetsetoran);				$('#inputCaper').val(targetcaper);				$('#inputCicilanLaka').val(0);				$('#inputCicilanKS').val(0);				$('#inputTabungan').val(0);				$('#inputKurangSetoran').val(0);				$('#inputDispensasi').val(0);				$('#btnBayarLaka').attr('disabled','disabled');				$('#btnBayarKS').attr('disabled','disabled');				$('#btnTabung').attr('disabled','disabled');			}			else			{				var ks = Math.abs(sisa)				$('#inputKelebihan').val(0);				$('#inputSetoran').val(sisasetoran);				$('#inputCaper').val(targetcaper);				$('#inputCicilanLaka').val(0);				$('#inputCicilanKS').val(0);				$('#inputTabungan').val(0);				$('#inputKurangSetoran').val(ks);				$('#inputDispensasi').val(0);				$('#btnBayarLaka').attr('disabled','disabled');				$('#btnBayarKS').attr('disabled','disabled');				$('#btnTabung').attr('disabled','disabled');			}		});		$('#inputDispensasi').blur(function(){			var dispensasi = parseInt(replaceAll($('#inputDispensasi').val(),',',''));			var nilaitotalsetoran = parseInt(replaceAll($('#inputTotalSetoran').val(),',',''));			var targetsetoran = parseInt($('#inputTargetSetoran').val());			var targetcaper = parseInt($('#inputTargetCaper').val());			var sisasetoran = nilaitotalsetoran - targetcaper;			var sisa = sisasetoran - targetsetoran + dispensasi;			if(sisa > 0)			{				$('#inputKelebihan').val(sisa);				$('#inputSetoran').val(targetsetoran);				$('#inputCaper').val(targetcaper);				$('#inputCicilanLaka').val(0);				$('#inputCicilanKS').val(0);				$('#inputTabungan').val(0);				$('#inputKurangSetoran').val(0);				$('#btnBayarLaka').removeAttr('disabled');				$('#btnBayarKS').removeAttr('disabled');				$('#btnTabung').removeAttr('disabled');			}			else if(sisa == 0)			{				$('#inputKelebihan').val(0);				$('#inputSetoran').val(targetsetoran);				$('#inputCaper').val(targetcaper);				$('#inputCicilanLaka').val(0);				$('#inputCicilanKS').val(0);				$('#inputTabungan').val(0);				$('#inputKurangSetoran').val(0);				$('#btnBayarLaka').attr('disabled','disabled');				$('#btnBayarKS').attr('disabled','disabled');				$('#btnTabung').attr('disabled','disabled');			}			else			{				var ks = Math.abs(sisa)				$('#inputKelebihan').val(0);				$('#inputSetoran').val(sisasetoran);				$('#inputCaper').val(targetcaper);				$('#inputCicilanLaka').val(0);				$('#inputCicilanKS').val(0);				$('#inputTabungan').val(0);				$('#inputKurangSetoran').val(ks);				$('#btnBayarLaka').attr('disabled','disabled');				$('#btnBayarKS').attr('disabled','disabled');				$('#btnTabung').attr('disabled','disabled');			}		});	})	function showFormBayarLoanLaka()	{		$('#formBayarLoanLaka').modal('show');	}	function showFormBayarKS()	{		$('#formBayarKS').modal('show');	}	function showFormTabungan()	{		$('#formTabungan').modal('show');	}	function setBayarLoanLaka()	{		var bayarLoanLaka = parseInt(replaceAll($('#inputNilaiBayarLoanLaka').val(),',',''));		var kelebihan = $('#inputKelebihan').val();		var bayarks = $('#inputCicilanKS').val();		var tabungan = $('#inputTabungan').val();		if(bayarLoanLaka > kelebihan || bayarLoanLaka > (kelebihan - bayarks - tabungan))		{			window.alert("Nilai yang anda masukkan berlebih dari alokasi kelebihan setoran!");			$('#inputNilaiBayarLoanLaka').val(0);		}		else		{			$('#inputCicilanLaka').val(bayarLoanLaka);		}		return false;	}	function setBayarKS()	{		var kelebihan = $('#inputKelebihan').val();		var bayarlaka = $('#inputCicilanLaka').val();		var bayarks = parseInt(replaceAll($('#inputNilaiBayarLoanKS').val(),',',''));		var tabungan = $('#inputTabungan').val();		if(bayarks > kelebihan || bayarks > (kelebihan - bayarlaka - tabungan))		{			window.alert("Nilai yang anda masukkan berlebih dari alokasi kelebihan setoran!");			$('#inputNilaiBayarLoanKS').val(0);		}		else		{			$('#inputCicilanKS').val(bayarks);		}		return false;	}	function setTabungan()	{		var kelebihan = $('#inputKelebihan').val();		var bayarlaka = $('#inputCicilanLaka').val();		var bayarks = $('#inputCicilanKS').val();		var tabungan = parseInt(replaceAll($('#inputNilaiTabungan').val(),',',''));				if(tabungan > kelebihan || tabungan > (kelebihan - bayarlaka - bayarks))		{			window.alert("Nilai yang anda masukkan berlebih dari alokasi kelebihan setoran!");			$('#inputNilaiTabungan').val(0);		}		else		{			$('#inputTabungan').val(tabungan);		}		return false;	}	function bayarSetoran()	{		var sro = $('#sroID').val();		var armada = $('#armadaID').val();		var pengemudi = $('#pengemudiID').val();		var pegawai = $('#pegawaiID').val();		var target = $('#inputTotal').val();		var totalsetoran = parseInt(replaceAll($('#inputTotalSetoran').val(),',',''));		var setoran = $('#inputSetoran').val();		var caper = $('#inputCaper').val();		var tabungan = $('#inputTabungan').val();		var loanlaka = $('#inputCicilanLaka').val();		var loanks = $('#inputCicilanKS').val();		var kurangsetoran = $('#inputKurangSetoran').val();		var dispensasi = parseInt(replaceAll($('#inputDispensasi').val(),',',''));		var laka = $('#inputTagihanLaka').val();		var tglsetoran = $('#tglSetoran').val();		$.post(site+'setoran/save', 			{				sro : sro,				armada : armada,				pengemudi : pengemudi,				pegawai : pegawai,				tglsetoran : tglsetoran,				target : target,				totalsetoran : totalsetoran,				setoran : setoran,				caper : caper,				tabungan : tabungan,				loanlaka : loanlaka,				loanks : loanks,				kurangsetoran : kurangsetoran,				dispensasi : dispensasi,				laka : laka			}, 			function(data){				if(confirm("Ingin Mencetak Tanda Bukti Setoran?"))				{					load('setoran/kwitansi/'+data['id'],'#content');				}				else				{					window.location = site+"setoran";				}		},'json');	}	function batalkan()	{		window.location = site+"setoran";	}</script>